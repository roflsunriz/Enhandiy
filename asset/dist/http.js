const d={Accept:"application/json","X-Requested-With":"XMLHttpRequest"};function m(){const t=window.config?.csrf_token;if(t)return t;const n=document.getElementById("csrfToken");if(n&&n.value)return n.value;const o=document.querySelector('meta[name="csrf-token"]');return o&&o.content?o.content:""}function T(e,t,n){return new Promise((o,c)=>{const i=setTimeout(()=>{c(new Error("Request timeout"))},n);fetch(e,t).then(s=>{clearTimeout(i),o(s)}).catch(s=>{clearTimeout(i),c(s)})})}async function a(e,t={}){const{method:n="GET",headers:o={},body:c,timeout:i=1e4}=t,s={...d,...o};c&&typeof c=="string"&&(s["Content-Type"]="application/json");const u=m();u&&n!=="GET"&&(s["X-CSRF-Token"]=u);try{const r=await T(e,{method:n,headers:s,body:c},i),f=r.headers.get("Content-Type")||"";if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);return f.includes("application/json")?await r.json():{success:!0,data:await r.text()}}catch(r){return console.error("Request failed:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}function h(e,t){return a(e,{method:"GET",headers:t})}function w(e,t,n){const o=t instanceof FormData?t:JSON.stringify(t);return a(e,{method:"POST",body:o,headers:n})}function y(e,t,n){const o=t instanceof FormData?t:JSON.stringify(t);return a(e,{method:"PUT",body:o,headers:n})}function g(e,t){return a(e,{method:"DELETE",headers:t})}export{h as a,y as b,g as d,m as g,w as p};
