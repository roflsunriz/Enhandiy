const d={Accept:"application/json","X-Requested-With":"XMLHttpRequest"};function T(){return window.config?.csrf_token||""}function p(e,t,o){return new Promise((r,c)=>{const i=setTimeout(()=>{c(new Error("Request timeout"))},o);fetch(e,t).then(s=>{clearTimeout(i),r(s)}).catch(s=>{clearTimeout(i),c(s)})})}async function a(e,t={}){const{method:o="GET",headers:r={},body:c,timeout:i=1e4}=t,s={...d,...r};c&&typeof c=="string"&&(s["Content-Type"]="application/json");const u=T();u&&o!=="GET"&&(s["X-CSRF-Token"]=u);try{const n=await p(e,{method:o,headers:s,body:c},i),f=n.headers.get("Content-Type")||"";if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);return f.includes("application/json")?await n.json():{success:!0,data:await n.text()}}catch(n){return console.error("Request failed:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}function l(e,t){return a(e,{method:"GET",headers:t})}function y(e,t,o){const r=t instanceof FormData?t:JSON.stringify(t);return a(e,{method:"POST",body:r,headers:o})}function w(e,t,o){const r=t instanceof FormData?t:JSON.stringify(t);return a(e,{method:"PUT",body:r,headers:o})}function g(e,t){return a(e,{method:"DELETE",headers:t})}export{w as a,g as d,l as g,y as p};
