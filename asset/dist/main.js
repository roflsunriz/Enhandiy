import{r as n,i as o,a as s,s as r}from"./errorHandling.js";import{F as l}from"./FileManager.js";import"./modal.js";import"./api-client.js";import"./http.js";n(()=>{o(),s(),c(),d(),w()});function c(){const e=document.getElementById("fileManagerContainer");if(window.fileData&&e){const a=new l(e,{itemsPerPage:12,defaultSort:"date_desc"});a.setFiles(window.fileData),window.fileManagerInstance=a}else f()}function d(){const e=document.getElementById("statusMessage");e&&setTimeout(()=>{e.style.opacity="0",setTimeout(()=>{e.style.display="none"},300)},5e3)}function w(){const a=new URLSearchParams(window.location.search).get("error");if(a){let i="",t="エラー";switch(a){case"expired":t="共有リンクエラー",i="この共有リンクは有効期限が切れています。";break;case"limit_exceeded":t="ダウンロード制限エラー",i="このファイルは最大ダウンロード数に達しているため、ダウンロードできません。";break;default:i="不明なエラーが発生しました。";break}r(`${t}: ${i}`,"error"),m()}}function m(){if(window.history&&window.history.replaceState){const e=window.location.pathname+window.location.search.replace(/[?&]error=[^&]*/,"").replace(/^&/,"?");window.history.replaceState({},document.title,e)}}function f(){console.error("❌ FileManager initialization failed: missing container or data"),r("ファイル一覧の表示に問題があります。ページを再読み込みしてください。","error")}
