import{r as n,i as o,a as s,s as r}from"./errorHandling.js";import{F as l}from"./FileManager.js";import"./modal.js";import"./api-client.js";import"./http.js";n(()=>{console.log("PHPUploader v2.0 - Modern TypeScript Edition"),o(),s(),c(),d(),g()});function c(){const e=document.getElementById("fileManagerContainer");if(window.fileData&&e){console.log("Initializing new FileManager v2.0");const i=new l(e,{itemsPerPage:12,defaultSort:"date_desc"});i.setFiles(window.fileData),window.fileManagerInstance=i,console.log("FileManager initialized successfully")}else m()}function d(){const e=document.getElementById("statusMessage");e&&setTimeout(()=>{e.style.opacity="0",setTimeout(()=>{e.style.display="none"},300)},5e3)}function g(){const i=new URLSearchParams(window.location.search).get("error");if(i){let a="",t="エラー";switch(i){case"expired":t="共有リンクエラー",a="この共有リンクは有効期限が切れています。";break;case"limit_exceeded":t="ダウンロード制限エラー",a="このファイルは最大ダウンロード数に達しているため、ダウンロードできません。";break;default:a="不明なエラーが発生しました。";break}r(`${t}: ${a}`,"error"),w()}}function w(){if(window.history&&window.history.replaceState){const e=window.location.pathname+window.location.search.replace(/[?&]error=[^&]*/,"").replace(/^&/,"?");window.history.replaceState({},document.title,e)}}function m(){console.error("❌ FileManager initialization failed: missing container or data"),r("ファイル一覧の表示に問題があります。ページを再読み込みしてください。","error")}
