import{b as p,h as u}from"./errorHandling.js";function L(l,n,o,e){let t;switch(l){case"okcansel":t="OKCanselModal",v(t,n,o),e&&k(t,e),p(t);break;case"ok":t="OKModal",v(t,n,o),e&&k(t,e),p(t);break;default:console.error("Unknown modal type:",l)}}function w(){u("OKCanselModal"),u("OKModal")}function v(l,n,o){const e=document.getElementById(l);if(!e)return;const t=e.querySelector(".modal-title");t&&(t.innerHTML=y(n));const a=e.querySelector(".modal-body p");a&&(a.innerHTML=y(o))}function k(l,n){const o=document.getElementById(l);if(!o)return;const e=o.querySelector(".f-action");if(!e)return;const t=e.cloneNode(!0);e.parentNode?.replaceChild(t,e),typeof n=="function"?t.addEventListener("click",n):typeof n=="string"&&t.setAttribute("onclick",n)}function y(l){const n=document.createElement("div");return n.textContent=l,n.innerHTML}function S(l,n="お知らせ"){return new Promise(o=>{const e=document.getElementById("alertModal");if(!e){o();return}const t=e.querySelector("#alertModalLabel"),a=e.querySelector("#alertModalMessage");t&&(t.textContent=n),a&&(a.textContent=l);const r=e.querySelector('[data-bs-dismiss="modal"]'),s=()=>{r?.removeEventListener("click",s),o()};r?.addEventListener("click",s),p("alertModal")})}function q(l,n="確認"){return new Promise(o=>{const e=document.getElementById("confirmModal");if(!e){o(!1);return}const t=e.querySelector("#confirmModalLabel"),a=e.querySelector("#confirmModalMessage"),r=e.querySelector("#confirmModalOk"),s=e.querySelector("#confirmModalCancel");t&&(t.textContent=n),a&&(a.textContent=l);const i=()=>{d(),u("confirmModal"),o(!0)},c=()=>{d(),u("confirmModal"),o(!1)},d=()=>{r?.removeEventListener("click",i),s?.removeEventListener("click",c),e.removeEventListener("hidden.bs.modal",c)};r?.addEventListener("click",i),s?.addEventListener("click",c),e.addEventListener("hidden.bs.modal",c,{once:!0}),p("confirmModal")})}function C(l,n="",o="入力"){return new Promise(e=>{const t=document.getElementById("promptModal");if(!t){e(null);return}const a=t.querySelector("#promptModalLabel"),r=t.querySelector("#promptModalMessage"),s=t.querySelector("#promptModalInput"),i=t.querySelector("#promptModalOk"),c=t.querySelector("#promptModalCancel");a&&(a.textContent=o),r&&(r.textContent=l,r.style.whiteSpace="pre-line"),s&&(s.value=n,t.addEventListener("shown.bs.modal",()=>{s.focus(),s.select()},{once:!0}));const d=()=>{const M=s?.value?.trim()||"";f(),u("promptModal"),e(M||null)},m=()=>{f(),u("promptModal"),e(null)},E=M=>{M.key==="Enter"&&(M.preventDefault(),d())},f=()=>{i?.removeEventListener("click",d),c?.removeEventListener("click",m),s?.removeEventListener("keypress",E),t.removeEventListener("hidden.bs.modal",m)};i?.addEventListener("click",d),c?.addEventListener("click",m),s?.addEventListener("keypress",E),t.addEventListener("hidden.bs.modal",m,{once:!0}),p("promptModal")})}function b(l,n="パスワード入力"){return new Promise(o=>{const e=document.getElementById("passwordModal");if(!e){o(null);return}const t=e.querySelector("#passwordModalLabel"),a=e.querySelector("#passwordModalMessage"),r=e.querySelector("#passwordModalInput"),s=e.querySelector("#passwordModalOk"),i=e.querySelector("#passwordModalCancel");t&&(t.textContent=n),a&&(a.textContent=l),r&&(r.value="",e.addEventListener("shown.bs.modal",()=>{r.focus()},{once:!0}));const c=()=>{const f=r?.value||"";E(),u("passwordModal"),o(f||null)},d=()=>{E(),u("passwordModal"),o(null)},m=f=>{f.key==="Enter"&&(f.preventDefault(),c())},E=()=>{s?.removeEventListener("click",c),i?.removeEventListener("click",d),r?.removeEventListener("keypress",m),e.removeEventListener("hidden.bs.modal",d)};s?.addEventListener("click",c),i?.addEventListener("click",d),r?.addEventListener("keypress",m),e.addEventListener("hidden.bs.modal",d,{once:!0}),p("passwordModal")})}typeof window<"u"&&(window.openModal=L,window.closeModal=w);export{S as a,q as b,C as c,b as s};
