function C(e){return document.querySelector(e)}function M(e){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}function S(e,t){e&&e.classList.add(t)}function _(e,t){e&&e.classList.remove(t)}function q(e,t,s){if(!e)return null;if(s===void 0)return e.getAttribute(t);e.setAttribute(t,s)}function b(e,t){if(!e)return null;if(t===void 0)return e.textContent;e.textContent=t}function d(e,t="info"){E();const s=h(e,t);document.body.appendChild(s),setTimeout(()=>{s.classList.add("show")},10),setTimeout(()=>{f(s)},5e3)}function g(e){d(e,"success")}function c(e){d(e,"error")}function h(e,t){const s=document.createElement("div");s.className=`status-message status-message--${t}`,s.innerHTML=`
    <div class="status-message__content">
      <span class="status-message__icon">${w(t)}</span>
      <span class="status-message__text">${p(e)}</span>
      <button class="status-message__close" aria-label="閉じる">&times;</button>
    </div>
  `;const o=s.querySelector(".status-message__close");return o&&o.addEventListener("click",()=>{f(s)}),s}function w(e){switch(e){case"success":return"✓";case"error":return"✗";case"warning":return"⚠";case"info":default:return"ℹ"}}function p(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}function E(){document.querySelectorAll(".status-message").forEach(t=>{t.remove()})}function f(e){e.classList.add("hide"),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},300)}typeof window<"u"&&(window.showError=c,window.showSuccess=g);const T={Accept:"application/json","X-Requested-With":"XMLHttpRequest"};function v(){return window.config?.csrf_token||""}function y(e,t,s){return new Promise((o,a)=>{const i=setTimeout(()=>{a(new Error("Request timeout"))},s);fetch(e,t).then(r=>{clearTimeout(i),o(r)}).catch(r=>{clearTimeout(i),a(r)})})}async function l(e,t={}){const{method:s="GET",headers:o={},body:a,timeout:i=1e4}=t,r={...T,...o};a&&typeof a=="string"&&(r["Content-Type"]="application/json");const u=v();u&&s!=="GET"&&(r["X-CSRF-Token"]=u);try{const n=await y(e,{method:s,headers:r,body:a},i),m=n.headers.get("Content-Type")||"";if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);return m.includes("application/json")?await n.json():{success:!0,data:await n.text()}}catch(n){return console.error("Request failed:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}function H(e,t,s){const o=t instanceof FormData?t:JSON.stringify(t);return l(e,{method:"POST",body:o,headers:s})}function k(e,t){return l(e,{method:"DELETE",headers:t})}function R(){window.addEventListener("error",e=>{console.error("JavaScript Error:",e.error),c("アプリケーションエラーが発生しました。ページを再読み込みしてください。")}),window.addEventListener("unhandledrejection",e=>{console.error("Unhandled Promise Rejection:",e.reason),c("通信エラーが発生しました。しばらく後に再試行してください。")})}export{C as $,q as a,g as b,_ as c,S as d,d as e,k as f,R as i,H as p,M as r,c as s,b as t};
