import{g as s,r as p,a as d,p as i}from"./http.js";class l{static async getFiles(t,e){const a=[];t&&a.push(`folder=${encodeURIComponent(t)}`);const n=[];e?.includeFolders&&n.push("folders"),e?.includeBreadcrumb&&n.push("breadcrumb"),n.length&&a.push(`include=${n.join(",")}`);const o=a.length?`&${a.join("&")}`:"";return s(`/api/index.php?path=/api/files${o}`)}static async downloadFile(t){const e=document.createElement("a");e.href=`/api/index.php?path=/api/files/${encodeURIComponent(t)}/download`,e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}static async deleteFile(t){const e=new FormData;return e.append("id",t),e.append("csrf_token",d()),i("/api/index.php?path=/api/auth/verify-delete",e)}static async deleteFileWithAuth(t,e,a){const n=e||a||"",o=new FormData;return o.append("id",t),n&&o.append("key",n),o.append("csrf_token",d()),i("/api/index.php?path=/api/auth/verify-delete",o)}static async bulkDeleteFiles(t,e){const a=new FormData;return t.forEach(n=>a.append("file_ids[]",n)),a.append("master_key",e),a.append("csrf_token",d()),i("/api/index.php?path=/api/files/batch",a)}static async updateComment(t,e){return p(`/api/index.php?path=/api/files/${encodeURIComponent(t)}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({comment:e})})}static async replaceFile(t,e){const a=new FormData;return a.append("file",e),i(`/api/index.php?path=/api/files/${encodeURIComponent(t)}/replace`,a)}static async moveFile(t,e){return p(`/api/index.php?path=/api/files/${encodeURIComponent(t)}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({folder_id:e})})}static async moveFiles(t,e){return p("/api/index.php?path=/api/files/batch",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_ids:t,folder_id:e})})}}class h{static async getFolders(){return s("/api/index.php?path=/api/folders")}static async createFolder(t,e){return p("/api/index.php?path=/api/folders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,parent_id:e||null})})}static async updateFolder(t,e){return p(`/api/index.php?path=/api/folders/${encodeURIComponent(t)}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})})}static async deleteFolder(t,e){const a=e?.moveFiles?"&move_files=true":"";return p(`/api/index.php?path=/api/folders/${encodeURIComponent(t)}${a}`,{method:"DELETE"})}static async getFolderFileCount(t){return s("/api/index.php?path=/api/folders")}static async moveFolder(t,e){return p(`/api/index.php?path=/api/folders/${encodeURIComponent(t)}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({parent_id:e})})}}class f{static async verifyDownload(t,e=""){const a=new FormData;return a.append("id",t),e&&a.append("key",e),a.append("csrf_token",d()),await i("/api/index.php?path=/api/auth/verify-download",a)}static async verifyDelete(t,e=""){const a=new FormData;return a.append("id",t),e&&a.append("key",e),a.append("csrf_token",d()),await i("/api/index.php?path=/api/auth/verify-delete",a)}static async verify(t,e){return i(e==="download"?"/api/index.php?path=/api/auth/verify-download":"/api/index.php?path=/api/auth/verify-delete",{key:t})}}export{f as A,l as F,h as a};
